:root{--c:#f86d31;--cd:#e55a1f;--cl:#fff5f0;--t:#1e293b;--t2:#64748b;--t3:#94a3b8;--b:#e2e8f0;--bg:#f8fafc;--card:#fff;--h:#f1f5f9}*{margin:0;padding:0;box-sizing:border-box}html,body{font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,sans-serif;background:var(--bg);color:var(--t);height:100%;overflow:hidden}body.dark{--t:#f1f5f9;--t2:#94a3b8;--t3:#64748b;--b:#334155;--bg:#0f172a;--card:#1e293b;--h:#334155;--cl:#3d2a1f}body.dark .nav{background:linear-gradient(180deg,#0f172a,#020617)}body.dark .chat-main{background:#0b141a}body.dark .lightbox-content{background:#1e293b}@keyframes slideIn{from{transform:translateY(20px);opacity:0}to{transform:translateY(0);opacity:1}}@keyframes spin{to{transform:rotate(360deg)}}@keyframes wave{0%,100%{height:8px}50%{height:24px}}.toast-box{position:fixed;top:20px;right:20px;z-index:99999;display:flex;flex-direction:column;gap:10px;pointer-events:none}.toast{padding:14px 20px;border-radius:12px;color:#fff;font-size:14px;font-weight:500;display:flex;align-items:center;gap:10px;animation:slideIn .3s;box-shadow:0 4px 20px rgba(0,0,0,.15);pointer-events:auto}.toast.success{background:linear-gradient(135deg,#10b981,#059669)}.toast.error{background:linear-gradient(135deg,#ef4444,#dc2626)}.toast.info{background:linear-gradient(135deg,#3b82f6,#2563eb)}.fab{position:fixed;bottom:100px;right:20px;width:56px;height:56px;background:linear-gradient(135deg,var(--c),var(--cd));border:none;border-radius:50%;color:#fff;font-size:20px;cursor:pointer;box-shadow:0 4px 20px rgba(248,109,49,.4);display:flex;align-items:center;justify-content:center;z-index:100;transition:.3s}.fab:hover{transform:scale(1.1)}.fab.hidden{transform:scale(0);opacity:0;pointer-events:none}@media(min-width:769px){.mobile-only{display:none!important}.app{display:grid;grid-template-columns:64px 220px 380px 1fr;height:100vh}.fab{bottom:30px;right:30px;width:60px;height:60px}}.nav{background:linear-gradient(180deg,#1e293b,#0f172a);display:flex;flex-direction:column;align-items:center;padding:16px 0;gap:8px}.nav-toggle{width:40px;height:40px;background:0 0;border:none;color:#64748b;font-size:16px;cursor:pointer;border-radius:10px;display:flex;align-items:center;justify-content:center;margin-bottom:16px}.nav-toggle:hover{background:rgba(255,255,255,.1);color:#fff}.nav-btn{width:44px;height:44px;border:none;background:0 0;color:#64748b;font-size:18px;cursor:pointer;border-radius:12px;display:flex;align-items:center;justify-content:center;position:relative}.nav-btn:hover{background:rgba(255,255,255,.1);color:#fff}.nav-btn.on{background:rgba(248,109,49,.2);color:var(--c)}.nav-btn .tip{position:absolute;left:54px;background:#1e293b;color:#fff;padding:8px 12px;border-radius:8px;font-size:13px;white-space:nowrap;opacity:0;visibility:hidden;z-index:999}.nav-btn:hover .tip{opacity:1;visibility:visible}.nav-btn .badge{position:absolute;top:4px;right:4px;min-width:18px;height:18px;background:#ef4444;color:#fff;font-size:10px;font-weight:700;border-radius:9px;display:flex;align-items:center;justify-content:center}.nav-space{flex:1}.dark-toggle{width:44px;height:24px;background:#475569;border-radius:12px;position:relative;cursor:pointer;margin:8px 0}.dark-toggle.on{background:var(--c)}.dark-toggle::after{content:'';position:absolute;width:20px;height:20px;background:#fff;border-radius:50%;top:2px;left:2px;transition:.3s}.dark-toggle.on::after{left:22px}.side{background:var(--card);border-right:1px solid var(--b);display:flex;flex-direction:column}.side-head{padding:24px 20px 16px}.side-head h2{font-size:20px;font-weight:700}.side-body{flex:1;overflow-y:auto;padding:0 12px 12px}.folder{display:flex;align-items:center;gap:12px;padding:12px 16px;cursor:pointer;color:var(--t2);font-size:14px;font-weight:500;border-radius:12px;margin-bottom:4px}.folder:hover{background:var(--h);color:var(--t)}.folder.on{background:var(--cl);color:var(--c);font-weight:600}.folder i{width:20px;text-align:center}.folder .cnt{margin-left:auto;background:var(--c);color:#fff;font-size:11px;font-weight:600;padding:3px 8px;border-radius:10px}.ad-banner{margin:16px 0;padding:20px;background:linear-gradient(135deg,#667eea,#764ba2);border-radius:16px;color:#fff;text-align:center;cursor:pointer}.ad-banner h4{font-size:14px;margin-bottom:6px}.ad-banner p{font-size:12px;opacity:.9}.ad-banner i{font-size:28px;margin-bottom:10px;display:block}.list{background:var(--bg);display:flex;flex-direction:column;overflow:hidden;border-right:1px solid var(--b)}.list-head{padding:20px;background:var(--card);border-bottom:1px solid var(--b)}.list-title{font-size:20px;font-weight:700;margin-bottom:16px;display:flex;align-items:center;justify-content:space-between}.list-title .empty-trash-btn{font-size:12px;padding:8px 14px;background:#ef4444;color:#fff;border:none;border-radius:8px;cursor:pointer;font-weight:600;display:none}.list-title .empty-trash-btn:hover{background:#dc2626}.list-title .empty-trash-btn.show{display:inline-flex;align-items:center;gap:6px}.search{display:flex;align-items:center;background:var(--bg);border:1px solid var(--b);border-radius:12px;padding:12px 16px;gap:12px}.search:focus-within{border-color:var(--c);box-shadow:0 0 0 3px rgba(248,109,49,.1)}.search i{color:var(--t3)}.search input{flex:1;border:none;background:0 0;font-size:14px;outline:none;color:var(--t)}.emails{flex:1;overflow-y:auto;padding:12px}.email-item{display:flex;align-items:center;gap:14px;padding:16px;background:var(--card);border:1px solid var(--b);border-radius:14px;margin-bottom:8px;cursor:pointer;position:relative;overflow:hidden}.email-item:hover{border-color:var(--c);transform:translateY(-1px)}.email-item.selected{border-color:var(--c);background:var(--cl)}.email-item.unread .email-from{font-weight:700}.email-item.unread .email-subj{font-weight:600;color:var(--t)}.email-item .swipe-action{position:absolute;top:0;right:0;bottom:0;width:80px;background:linear-gradient(135deg,#10b981,#059669);color:#fff;display:flex;flex-direction:column;align-items:center;justify-content:center;gap:4px;font-size:12px;transform:translateX(100%)}.email-item .swipe-action.delete{background:linear-gradient(135deg,#ef4444,#dc2626)}.email-av{width:48px;height:48px;border-radius:50%;display:flex;align-items:center;justify-content:center;color:#fff;font-weight:600;font-size:18px;flex-shrink:0}.email-content{flex:1;min-width:0}.email-row1{display:flex;align-items:center;justify-content:space-between;margin-bottom:4px}.email-from{font-size:15px;font-weight:500;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;flex:1}.email-time{font-size:12px;color:var(--t3);margin-left:12px}.email-subj{font-size:14px;color:var(--t2);white-space:nowrap;overflow:hidden;text-overflow:ellipsis;margin-bottom:4px}.email-preview{font-size:13px;color:var(--t3);white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.email-indicators{display:flex;align-items:center;gap:8px}.email-star{color:#d1d5db;cursor:pointer;font-size:16px}.email-star:hover,.email-star.on{color:#fbbf24}.email-badge{width:10px;height:10px;background:var(--c);border-radius:50%}.email-attach{color:var(--t3);font-size:14px}.view{background:var(--card);display:flex;flex-direction:column}.view-empty{flex:1;display:flex;flex-direction:column;align-items:center;justify-content:center;color:var(--t3)}.view-empty i{font-size:80px;opacity:.1;margin-bottom:20px}.view-head{padding:20px 24px;border-bottom:1px solid var(--b);display:flex;align-items:center;gap:16px}.view-back{width:40px;height:40px;border:1px solid var(--b);background:var(--card);border-radius:10px;cursor:pointer;color:var(--t2);display:flex;align-items:center;justify-content:center}.view-back:hover{background:var(--h);border-color:var(--c)}.view-subj{flex:1;font-size:20px;font-weight:700;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.view-actions{display:flex;gap:8px}.view-btn{width:40px;height:40px;border:1px solid var(--b);background:var(--card);border-radius:10px;cursor:pointer;color:var(--t2);display:flex;align-items:center;justify-content:center}.view-btn:hover{background:var(--h)}.view-btn.restore{color:#10b981}.view-btn.restore:hover{background:#d1fae5;border-color:#10b981}.view-meta{padding:20px 24px;border-bottom:1px solid var(--b);display:flex;align-items:center;gap:16px}.view-av{width:52px;height:52px;border-radius:50%;display:flex;align-items:center;justify-content:center;color:#fff;font-weight:600;font-size:20px}.view-info{flex:1}.view-info .name{font-size:16px;font-weight:600;margin-bottom:2px}.view-info .email{font-size:14px;color:var(--t2)}.view-info .time{font-size:13px;color:var(--t3);margin-top:2px}.view-body{flex:1;overflow-y:auto;padding:24px}.view-content{font-size:15px;line-height:1.8}.view-content img{max-width:100%;height:auto;border-radius:8px;margin:12px 0}.view-attachments{margin-top:24px;padding-top:20px;border-top:1px solid var(--b)}.view-attachments h4{font-size:14px;font-weight:600;color:var(--t2);margin-bottom:16px;display:flex;align-items:center;gap:8px}.attachment-list{display:flex;flex-wrap:wrap;gap:12px}.attachment-item{display:flex;align-items:center;gap:12px;padding:12px 16px;background:var(--h);border-radius:12px;cursor:pointer;text-decoration:none;color:var(--t);transition:.2s}.attachment-item:hover{background:var(--cl);transform:translateY(-2px)}.attachment-item i{font-size:24px;color:var(--c)}.attachment-item .att-info{flex:1}.attachment-item .att-name{font-size:14px;font-weight:500}.attachment-item .att-size{font-size:12px;color:var(--t3)}.attachment-preview{width:80px;height:80px;border-radius:10px;object-fit:cover;cursor:pointer;transition:.2s}.attachment-preview:hover{transform:scale(1.05);box-shadow:0 4px 12px rgba(0,0,0,.15)}.reply-box{border-top:1px solid var(--b);padding:16px 24px;background:var(--h)}.reply-toolbar{display:flex;gap:4px;margin-bottom:12px}.reply-toolbar button{width:32px;height:32px;border:none;background:var(--card);border-radius:8px;color:var(--t2);cursor:pointer;display:flex;align-items:center;justify-content:center}.reply-toolbar button:hover{background:var(--c);color:#fff}.reply-toolbar .sep{width:1px;height:24px;background:var(--b);margin:0 4px}.reply-input{background:var(--card);border:1px solid var(--b);border-radius:10px;padding:12px;min-height:60px;max-height:120px;overflow-y:auto;font-size:14px;line-height:1.6;outline:none}.reply-input:focus{border-color:var(--c)}.reply-input:empty::before{content:attr(data-placeholder);color:var(--t3)}.reply-footer{display:flex;align-items:center;justify-content:space-between;margin-top:12px}.reply-attach{display:flex;gap:6px}.reply-attach button{width:36px;height:36px;border:1px solid var(--b);background:var(--card);border-radius:8px;color:var(--t2);cursor:pointer;display:flex;align-items:center;justify-content:center}.reply-attach button:hover{border-color:var(--c);color:var(--c)}.reply-send{height:40px;padding:0 20px;background:linear-gradient(135deg,var(--c),var(--cd));border:none;border-radius:10px;color:#fff;font-size:14px;font-weight:600;cursor:pointer;display:flex;align-items:center;gap:8px}.reply-send:hover{box-shadow:0 4px 15px rgba(248,109,49,.4)}
.lightbox{position:fixed;inset:0;background:rgba(0,0,0,.9);z-index:9999;display:none;align-items:center;justify-content:center;padding:20px}.lightbox.show{display:flex}.lightbox-close{position:absolute;top:20px;right:20px;width:50px;height:50px;background:rgba(255,255,255,.1);border:none;border-radius:50%;color:#fff;font-size:24px;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:.2s}.lightbox-close:hover{background:rgba(255,255,255,.2)}.lightbox-content{max-width:90%;max-height:90%;border-radius:12px;overflow:hidden}.lightbox-content img{max-width:100%;max-height:85vh;object-fit:contain}.lightbox-content iframe,.lightbox-content embed{width:90vw;height:85vh;border:none;background:#fff;border-radius:12px}.lightbox-content .pdf-fallback{background:var(--card);padding:40px;border-radius:12px;text-align:center;color:var(--t)}.lightbox-content .pdf-fallback i{font-size:60px;color:var(--c);margin-bottom:20px;display:block}.lightbox-content .pdf-fallback h3{margin-bottom:10px}.lightbox-content .pdf-fallback a{display:inline-block;margin-top:20px;padding:12px 24px;background:var(--c);color:#fff;text-decoration:none;border-radius:10px;font-weight:600}.lightbox-nav{position:absolute;bottom:20px;left:50%;transform:translateX(-50%);display:flex;gap:12px}.lightbox-nav button{padding:12px 24px;background:rgba(255,255,255,.1);border:none;border-radius:10px;color:#fff;font-size:14px;cursor:pointer;display:flex;align-items:center;gap:8px}.lightbox-nav button:hover{background:rgba(255,255,255,.2)}
.confirm-modal{position:fixed;inset:0;background:rgba(0,0,0,.6);z-index:5000;display:none;align-items:center;justify-content:center;padding:20px;backdrop-filter:blur(4px)}.confirm-modal.show{display:flex}.confirm-box{background:var(--card);border-radius:20px;padding:28px;max-width:400px;width:100%;animation:slideIn .3s}.confirm-box h3{font-size:20px;font-weight:700;margin-bottom:12px;display:flex;align-items:center;gap:12px}.confirm-box h3 i{color:#ef4444}.confirm-box p{color:var(--t2);margin-bottom:24px;line-height:1.6}.confirm-btns{display:flex;gap:12px}.confirm-btns button{flex:1;padding:14px;border-radius:12px;font-size:15px;font-weight:600;cursor:pointer;transition:.2s}.confirm-btns .cancel{background:var(--h);border:1px solid var(--b);color:var(--t)}.confirm-btns .cancel:hover{background:var(--b)}.confirm-btns .danger{background:#ef4444;border:none;color:#fff}.confirm-btns .danger:hover{background:#dc2626}
@media(max-width:768px){.desktop-only{display:none!important}html,body{height:100dvh}.app{display:flex;flex-direction:column;height:100dvh;padding-bottom:70px}.list{flex:1;border:none}.list-head{padding:16px}.list-title{font-size:24px;font-weight:800;margin-bottom:14px}.emails{padding:10px 14px}.email-item{padding:14px 16px;border-radius:14px;margin-bottom:10px;border:none;box-shadow:0 2px 8px rgba(0,0,0,.04)}.email-item.unread{border-left:4px solid var(--c)}.email-av{width:50px;height:50px}.email-indicators{display:none}.mob-nav{position:fixed;bottom:0;left:0;right:0;background:var(--card);border-top:1px solid var(--b);display:flex;justify-content:space-around;padding:10px 0;padding-bottom:calc(10px + env(safe-area-inset-bottom));z-index:1000}.mob-nav button{display:flex;flex-direction:column;align-items:center;gap:4px;padding:8px 20px;border:none;background:0 0;color:var(--t3);font-size:11px;font-weight:600;cursor:pointer}.mob-nav button i{font-size:22px}.mob-nav button.on{color:var(--c)}.email-view-panel{position:fixed;inset:0;background:var(--card);z-index:1500;transform:translateX(100%);transition:transform .3s;display:flex;flex-direction:column}.email-view-panel.show{transform:translateX(0)}.ev-head{padding:14px 16px;border-bottom:1px solid var(--b);display:flex;align-items:center;gap:12px;padding-top:calc(14px + env(safe-area-inset-top))}.ev-back{width:44px;height:44px;border:none;background:0 0;color:var(--t);cursor:pointer;font-size:20px;display:flex;align-items:center;justify-content:center}.ev-title{flex:1;font-size:17px;font-weight:600;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.ev-actions{display:flex}.ev-actions button{width:44px;height:44px;border:none;background:0 0;color:var(--t2);cursor:pointer;font-size:18px;display:flex;align-items:center;justify-content:center}.ev-actions button.restore{color:#10b981}.ev-body{flex:1;overflow-y:auto;padding:20px}.ev-subject{font-size:22px;font-weight:700;margin-bottom:20px;line-height:1.3}.ev-meta{display:flex;align-items:center;gap:14px;margin-bottom:24px;padding-bottom:20px;border-bottom:1px solid var(--b)}.ev-av{width:48px;height:48px;border-radius:50%;display:flex;align-items:center;justify-content:center;color:#fff;font-weight:600;font-size:18px}.ev-info{flex:1}.ev-info .name{font-weight:600;font-size:16px}.ev-info .email{font-size:14px;color:var(--t2)}.ev-info .time{font-size:13px;color:var(--t3);margin-top:2px}.ev-content{font-size:16px;line-height:1.8}.ev-content img{max-width:100%;height:auto;border-radius:8px}.ev-footer{padding:14px 16px;border-top:1px solid var(--b);display:flex;gap:12px;padding-bottom:calc(14px + env(safe-area-inset-bottom))}.ev-footer button{flex:1;padding:16px;border:1px solid var(--b);background:var(--card);border-radius:14px;font-size:15px;font-weight:600;cursor:pointer;display:flex;align-items:center;justify-content:center;gap:8px}.ev-footer button.primary{background:var(--c);color:#fff;border-color:var(--c)}.ev-footer button.restore{background:#10b981;color:#fff;border-color:#10b981}}.compose-overlay{position:fixed;inset:0;background:rgba(0,0,0,.6);z-index:2000;display:none;align-items:center;justify-content:center;padding:20px;backdrop-filter:blur(4px)}.compose-overlay.show{display:flex}.compose-box{background:var(--card);border-radius:20px;width:100%;max-width:650px;max-height:90vh;display:flex;flex-direction:column;overflow:hidden;box-shadow:0 25px 60px rgba(0,0,0,.3);animation:slideIn .3s}.compose-head{padding:18px 24px;background:linear-gradient(135deg,var(--c),var(--cd));display:flex;align-items:center;justify-content:space-between}.compose-head h3{color:#fff;font-size:18px;font-weight:600}.compose-head button{width:36px;height:36px;border:none;background:rgba(255,255,255,.2);border-radius:10px;color:#fff;cursor:pointer;display:flex;align-items:center;justify-content:center}.compose-body{flex:1;overflow-y:auto;padding:24px}.compose-field{margin-bottom:16px;position:relative}.compose-field label{display:block;font-size:12px;font-weight:600;color:var(--t3);margin-bottom:6px;text-transform:uppercase}.compose-field input{width:100%;border:1px solid var(--b);border-radius:10px;padding:12px 14px;font-size:15px;outline:none;background:var(--card);color:var(--t)}.compose-field input:focus{border-color:var(--c)}.contact-suggestions{position:absolute;top:100%;left:0;right:0;background:var(--card);border:1px solid var(--b);border-radius:12px;box-shadow:0 10px 40px rgba(0,0,0,.15);max-height:200px;overflow-y:auto;z-index:10;display:none}.contact-suggestions.show{display:block}.contact-sug{display:flex;align-items:center;gap:12px;padding:12px 14px;cursor:pointer}.contact-sug:hover{background:var(--h)}.contact-sug .sug-av{width:36px;height:36px;border-radius:50%;display:flex;align-items:center;justify-content:center;color:#fff;font-size:14px;font-weight:600}.contact-sug .sug-email{font-size:14px}.compose-toolbar{display:flex;gap:4px;padding:12px 0;border-bottom:1px solid var(--b)}.compose-toolbar button{width:32px;height:32px;border:none;background:0 0;border-radius:8px;color:var(--t2);cursor:pointer;display:flex;align-items:center;justify-content:center}.compose-toolbar button:hover{background:var(--h)}.compose-toolbar .sep{width:1px;height:24px;background:var(--b);margin:0 6px}.compose-editor{min-height:200px;max-height:300px;overflow-y:auto;padding:14px;border:1px solid var(--b);border-radius:12px;font-size:15px;line-height:1.7;outline:none;margin-top:16px}.compose-editor:focus{border-color:var(--c)}.compose-editor:empty::before{content:attr(data-placeholder);color:var(--t3)}.audio-recorder{display:none;align-items:center;gap:14px;padding:14px;background:var(--h);border-radius:12px;margin-top:16px}.audio-recorder.show{display:flex}.audio-wave{display:flex;align-items:center;gap:3px;height:32px}.audio-wave span{width:4px;background:var(--c);border-radius:2px;animation:wave .6s ease-in-out infinite}.audio-wave span:nth-child(2){animation-delay:.1s}.audio-wave span:nth-child(3){animation-delay:.2s}.audio-wave span:nth-child(4){animation-delay:.3s}.audio-wave span:nth-child(5){animation-delay:.4s}.audio-time{font-size:16px;font-weight:600;min-width:50px}.audio-controls{display:flex;gap:10px;margin-left:auto}.audio-controls button{width:40px;height:40px;border:none;border-radius:50%;cursor:pointer;display:flex;align-items:center;justify-content:center}.audio-controls .pause{background:#fef3c7;color:#f59e0b}.audio-controls .done{background:#d1fae5;color:#10b981}.audio-controls .cancel{background:#fee2e2;color:#ef4444}.compose-foot{padding:16px 24px;border-top:1px solid var(--b);display:flex;align-items:center;justify-content:space-between;background:var(--h)}.compose-attach{display:flex;gap:8px}.compose-attach button{width:44px;height:44px;border:1px solid var(--b);background:var(--card);border-radius:12px;color:var(--t2);cursor:pointer;display:flex;align-items:center;justify-content:center;font-size:18px}.compose-attach button:hover{border-color:var(--c);color:var(--c)}.send-wrap{position:relative}.send-btn{height:48px;width:48px;background:linear-gradient(135deg,var(--c),var(--cd));border:none;border-radius:50%;color:#fff;font-size:20px;cursor:pointer;display:flex;align-items:center;justify-content:center;box-shadow:0 4px 15px rgba(248,109,49,.4)}.send-btn:hover{transform:scale(1.1)}.send-options{position:absolute;bottom:58px;right:0;background:var(--card);border:1px solid var(--b);border-radius:14px;box-shadow:0 10px 40px rgba(0,0,0,.2);overflow:hidden;opacity:0;visibility:hidden;transform:translateY(10px);transition:.2s;min-width:180px}.send-wrap:hover .send-options{opacity:1;visibility:visible;transform:translateY(0)}.send-opt{display:flex;align-items:center;gap:12px;padding:14px 18px;cursor:pointer;font-size:14px;font-weight:500}.send-opt:hover{background:var(--h)}.send-opt i{width:20px;color:var(--t2)}.send-opt.primary{color:var(--c)}.send-opt.primary i{color:var(--c)}.send-opt.danger{color:#ef4444}.send-opt.danger i{color:#ef4444}@media(max-width:768px){.compose-overlay{padding:0;align-items:flex-end}.compose-box{max-width:100%;max-height:95vh;border-radius:24px 24px 0 0}}.chat-overlay{position:fixed;inset:0;background:rgba(0,0,0,.5);z-index:3000;display:none;align-items:center;justify-content:center;padding:20px}.chat-overlay.show{display:flex}.chat-container{width:100%;max-width:900px;height:85vh;background:var(--card);border-radius:20px;display:flex;overflow:hidden;box-shadow:0 25px 60px rgba(0,0,0,.3)}.chat-sidebar{width:320px;border-right:1px solid var(--b);display:flex;flex-direction:column}.chat-sidebar-head{padding:18px;background:linear-gradient(135deg,var(--c),var(--cd));color:#fff}.chat-sidebar-head-top{display:flex;align-items:center;justify-content:space-between;margin-bottom:14px}.chat-sidebar-head h3{font-size:20px;font-weight:700}.chat-head-actions{display:flex;gap:8px}.chat-head-actions button{width:40px;height:40px;border:none;background:rgba(255,255,255,.2);border-radius:50%;color:#fff;cursor:pointer;display:flex;align-items:center;justify-content:center}.chat-new-input{display:flex;gap:10px}.chat-new-input input{flex:1;border:none;border-radius:24px;padding:12px 18px;font-size:14px;outline:none;background:rgba(255,255,255,.9);color:#333}.chat-new-input button{width:44px;height:44px;background:#fff;border:none;border-radius:50%;color:var(--c);cursor:pointer;display:flex;align-items:center;justify-content:center;font-size:18px}.chat-tabs{display:flex;border-bottom:1px solid var(--b)}.chat-tab{flex:1;padding:14px;text-align:center;font-size:14px;font-weight:600;color:var(--t3);cursor:pointer;border-bottom:3px solid transparent}.chat-tab:hover{color:var(--t)}.chat-tab.on{color:var(--c);border-bottom-color:var(--c)}.chat-list{flex:1;overflow-y:auto}.chat-item{display:flex;align-items:center;gap:14px;padding:16px 18px;cursor:pointer;border-bottom:1px solid var(--b)}.chat-item:hover,.chat-item.on{background:var(--h)}.chat-item-av{width:52px;height:52px;border-radius:50%;display:flex;align-items:center;justify-content:center;color:#fff;font-weight:600;font-size:18px;position:relative}.chat-item-av .status-dot{position:absolute;bottom:2px;right:2px;width:14px;height:14px;border-radius:50%;border:2px solid var(--card)}.chat-item-av .status-dot.online{background:#22c55e}.chat-item-av .status-dot.offline{background:#94a3b8}.chat-item-info{flex:1;min-width:0}.chat-item-name{font-size:15px;font-weight:600;margin-bottom:3px}.chat-item-last{font-size:13px;color:var(--t3);white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.chat-item-unread{min-width:22px;height:22px;background:var(--c);color:#fff;font-size:12px;font-weight:700;border-radius:11px;display:flex;align-items:center;justify-content:center}.chat-main{flex:1;display:flex;flex-direction:column;background:#e5ddd5}.chat-main-head{padding:14px 18px;background:var(--card);border-bottom:1px solid var(--b);display:flex;align-items:center;gap:14px}.chat-main-av{width:48px;height:48px;border-radius:50%;display:flex;align-items:center;justify-content:center;color:#fff;font-weight:600;font-size:18px}.chat-main-info{flex:1}.chat-main-name{font-size:17px;font-weight:600}.chat-main-status{font-size:13px}.chat-main-status.online{color:#22c55e}.chat-main-status.offline{color:var(--t3)}.chat-main-actions{display:flex;gap:6px}.chat-main-actions button{width:44px;height:44px;border:none;background:0 0;color:var(--t2);cursor:pointer;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:18px}.chat-main-actions button:hover{background:var(--h)}.chat-messages{flex:1;overflow-y:auto;padding:20px;display:flex;flex-direction:column;gap:10px}.chat-msg{max-width:70%;padding:12px 16px;border-radius:16px;font-size:15px;line-height:1.5;box-shadow:0 1px 3px rgba(0,0,0,.1)}.chat-msg.sent{background:#dcf8c6;color:#111;align-self:flex-end;border-bottom-right-radius:6px}.chat-msg.recv{background:var(--card);align-self:flex-start;border-bottom-left-radius:6px}.chat-msg .time{font-size:11px;color:var(--t3);margin-top:6px;display:flex;align-items:center;gap:4px;justify-content:flex-end}.chat-msg .time .fa-check-double{color:#53bdeb}.chat-input-area{padding:14px 18px;background:var(--card);display:flex;gap:12px;align-items:center}.chat-input{flex:1;border:1px solid var(--b);border-radius:28px;padding:14px 20px;font-size:15px;outline:none;background:var(--bg);color:var(--t)}.chat-input:focus{border-color:var(--c)}.chat-send{width:52px;height:52px;background:var(--c);border:none;border-radius:50%;color:#fff;cursor:pointer;display:flex;align-items:center;justify-content:center;font-size:20px}.chat-send:hover{background:var(--cd)}.chat-empty{flex:1;display:flex;flex-direction:column;align-items:center;justify-content:center;color:var(--t3);background:var(--card)}.chat-empty i{font-size:80px;opacity:.15;margin-bottom:20px}@media(max-width:768px){.chat-overlay{padding:0}.chat-container{max-width:100%;height:100dvh;border-radius:0}.chat-sidebar{width:100%;position:absolute;inset:0;z-index:1}.chat-main{position:absolute;inset:0;z-index:2;transform:translateX(100%);transition:transform .3s}.chat-main.show{transform:translateX(0)}}.tools-overlay{position:fixed;inset:0;z-index:2000;display:none}.tools-overlay.show{display:block}.tools-backdrop{position:absolute;inset:0;background:rgba(0,0,0,.5)}.tools-sheet{position:absolute;bottom:80px;left:16px;right:16px;background:var(--card);border-radius:24px;overflow:hidden;animation:slideIn .3s}.tools-head{padding:18px 20px;border-bottom:1px solid var(--b);display:flex;align-items:center;justify-content:space-between}.tools-head h3{font-size:20px;font-weight:700}.tools-head button{width:36px;height:36px;border:none;background:var(--h);border-radius:50%;cursor:pointer;color:var(--t2);display:flex;align-items:center;justify-content:center}.tools-body{padding:20px}.tools-grid{display:grid;grid-template-columns:repeat(4,1fr);gap:16px}.tools-item{display:flex;flex-direction:column;align-items:center;gap:10px;padding:16px 8px;cursor:pointer;border-radius:16px}.tools-item:active{background:var(--h);transform:scale(.95)}.tools-icon{width:56px;height:56px;border-radius:16px;display:flex;align-items:center;justify-content:center;font-size:24px}.tools-item span{font-size:12px;text-align:center;font-weight:600;color:var(--t2)}.invite-modal{position:fixed;inset:0;background:rgba(0,0,0,.5);z-index:4000;display:none;align-items:center;justify-content:center;padding:20px}.invite-modal.show{display:flex}.invite-box{background:var(--card);border-radius:20px;width:100%;max-width:400px;padding:28px;animation:slideIn .3s}.invite-box h3{font-size:20px;font-weight:700;margin-bottom:20px}.invite-box input{width:100%;border:1px solid var(--b);border-radius:12px;padding:14px;font-size:15px;margin-bottom:20px;outline:none;background:var(--card);color:var(--t)}.invite-box input:focus{border-color:var(--c)}.invite-btns{display:flex;gap:12px}.invite-btns button{flex:1;padding:14px;border-radius:12px;font-size:15px;font-weight:600;cursor:pointer}.invite-btns .cancel{background:var(--h);border:1px solid var(--b);color:var(--t)}.invite-btns .send{background:var(--c);border:none;color:#fff}.loading{padding:60px 20px;text-align:center;color:var(--t3)}.loading i{font-size:40px;margin-bottom:16px;display:block;animation:spin 1s linear infinite}.empty-state{padding:60px 20px;text-align:center;color:var(--t3)}.empty-state i{font-size:60px;margin-bottom:20px;display:block;opacity:.15}

/* Multi-select mode */
.select-bar{position:fixed;top:0;left:0;right:0;height:56px;background:linear-gradient(135deg,var(--c),var(--cd));display:flex;align-items:center;padding:0 12px;gap:12px;z-index:2000;box-shadow:0 2px 10px rgba(0,0,0,.2)}
.select-bar .sel-close{width:40px;height:40px;border:none;background:rgba(255,255,255,.2);border-radius:50%;color:#fff;font-size:16px;cursor:pointer}
.select-bar .sel-count{flex:1;color:#fff;font-weight:600;font-size:15px}
.select-bar .sel-actions{display:flex;gap:8px}
.select-bar .sel-actions button{width:40px;height:40px;border:none;background:rgba(255,255,255,.2);border-radius:50%;color:#fff;font-size:16px;cursor:pointer}
.select-mode .email-item{cursor:pointer}
.select-mode .email-item::before{content:'';position:absolute;left:12px;top:50%;transform:translateY(-50%);width:22px;height:22px;border:2px solid var(--b);border-radius:50%;background:var(--card)}
.select-mode .email-item.selected::before{background:var(--c);border-color:var(--c)}
.select-mode .email-item.selected::after{content:'\f00c';font-family:'Font Awesome 6 Free';font-weight:900;position:absolute;left:17px;top:50%;transform:translateY(-50%);color:#fff;font-size:12px}
.select-mode .email-item{padding-left:48px;position:relative}
.select-mode .mob-nav,.select-mode .fab{display:none}

/* Modal */
.modal-overlay{position:fixed;inset:0;background:rgba(0,0,0,.5);z-index:3000;display:flex;align-items:center;justify-content:center;padding:20px}
.modal-box{background:var(--card);border-radius:16px;max-width:500px;width:100%;max-height:80vh;overflow:hidden}
.modal-head{padding:16px 20px;border-bottom:1px solid var(--b);display:flex;justify-content:space-between;align-items:center}
.modal-head h3{font-size:18px;font-weight:600}
.modal-head button{width:32px;height:32px;border:none;background:var(--h);border-radius:50%;cursor:pointer}
.modal-body{padding:20px;overflow-y:auto;max-height:60vh}

/* Keyboard shortcuts */
kbd{background:var(--h);padding:4px 8px;border-radius:4px;font-family:monospace;font-size:12px;border:1px solid var(--b)}
.modal-body table td{padding:8px 12px;border-bottom:1px solid var(--b)}

/* Attachment chips */
.attachment-list-compose{display:flex;flex-wrap:wrap;gap:8px;margin:10px 0}
.att-chip{display:inline-flex;align-items:center;gap:6px;background:var(--h);padding:6px 12px;border-radius:20px;font-size:13px}
.att-chip .att-size{color:var(--t3);font-size:11px}
.att-chip button{background:none;border:none;color:var(--t3);cursor:pointer;padding:0;margin-left:4px}

/* Templates */
.template-list{max-height:300px;overflow-y:auto}
.template-item{padding:12px;border:1px solid var(--b);border-radius:10px;margin-bottom:8px;cursor:pointer}
.template-item:hover{background:var(--h);border-color:var(--c)}
.template-item p{color:var(--t2);font-size:13px;margin-top:4px}

/* Labels */
.labels-dialog{max-height:300px}
.labels-list{max-height:200px;overflow-y:auto}
.label-check{display:block;padding:10px;border-bottom:1px solid var(--b);cursor:pointer}
.label-check:hover{background:var(--h)}
.label-check input{margin-right:10px}

/* Undo bar */
.undo-bar{position:fixed;bottom:100px;left:50%;transform:translateX(-50%);background:#333;color:#fff;padding:12px 20px;border-radius:30px;display:flex;align-items:center;gap:12px;z-index:3000;box-shadow:0 4px 20px rgba(0,0,0,.3)}
.undo-bar button{background:var(--c);color:#fff;border:none;padding:6px 16px;border-radius:20px;cursor:pointer;font-weight:600}

/* Sidebar Toggle Fix */
.app.sidebar-collapsed{grid-template-columns:64px 0 380px 1fr}
.app.sidebar-collapsed .side{width:0;overflow:hidden;padding:0;border:none}
.app.sidebar-collapsed .nav-toggle i{transform:rotate(180deg)}
.nav-toggle.rotated i{transform:rotate(180deg)}
.nav-toggle i{transition:transform .3s ease}

/* Sidebar Toggle - Complete Fix */
.app.sidebar-collapsed{grid-template-columns:64px 0 380px 1fr}
.app.sidebar-collapsed .side{width:0;min-width:0;overflow:hidden;padding:0;border:none;opacity:0}
.nav-toggle i{transition:transform .3s ease}
.nav-toggle.rotated i,.app.sidebar-collapsed .nav-toggle i{transform:rotate(180deg)}

/* Enhanced Chat Styles */
.chat-messages{flex:1;overflow-y:auto;padding:16px;display:flex;flex-direction:column;gap:8px}
.chat-msg{max-width:80%;padding:12px 16px;border-radius:18px;position:relative;word-wrap:break-word}
.chat-msg.sent{align-self:flex-end;background:linear-gradient(135deg,var(--c),var(--cd));color:#fff;border-bottom-right-radius:4px}
.chat-msg.recv{align-self:flex-start;background:var(--h);color:var(--t);border-bottom-left-radius:4px}
.chat-msg .msg-text{font-size:15px;line-height:1.5}
.chat-msg .msg-time{display:block;font-size:11px;margin-top:6px;opacity:.7;text-align:right}
.chat-msg.sent .msg-time{color:rgba(255,255,255,.8)}
.chat-msg.recv .msg-time{color:var(--t3)}
.chat-input-area{display:flex;gap:10px;padding:16px;border-top:1px solid var(--b);background:var(--card)}
.chat-input{flex:1;padding:12px 18px;border:1px solid var(--b);border-radius:25px;font-size:15px;outline:none;background:var(--bg);color:var(--t)}
.chat-input:focus{border-color:var(--c)}
.chat-send{width:46px;height:46px;border:none;background:linear-gradient(135deg,var(--c),var(--cd));border-radius:50%;color:#fff;font-size:18px;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:.2s}
.chat-send:hover{transform:scale(1.05);box-shadow:0 4px 15px rgba(248,109,49,.4)}
.chat-item{display:flex;align-items:center;gap:12px;padding:14px 16px;cursor:pointer;border-bottom:1px solid var(--b);transition:.2s}
.chat-item:hover,.chat-item.on{background:var(--h)}
.chat-item-av{width:48px;height:48px;border-radius:50%;display:flex;align-items:center;justify-content:center;color:#fff;font-weight:600;font-size:18px;position:relative;flex-shrink:0}
.chat-item-info{flex:1;min-width:0}
.chat-item-name{font-weight:600;font-size:15px;margin-bottom:3px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
.chat-item-last{font-size:13px;color:var(--t3);white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
.chat-item-unread{min-width:22px;height:22px;background:var(--c);color:#fff;font-size:12px;font-weight:700;border-radius:11px;display:flex;align-items:center;justify-content:center;padding:0 6px}
.status-dot{position:absolute;bottom:2px;right:2px;width:12px;height:12px;border-radius:50%;border:2px solid var(--card)}
.status-dot.online{background:#10b981}
.status-dot.offline{background:#94a3b8}
.chat-main-status.online{color:#10b981}
.chat-main-status.offline{color:#94a3b8}

/* Chat Message Bubbles */
.chat-messages{flex:1;overflow-y:auto;padding:16px;display:flex;flex-direction:column;gap:8px}
.chat-msg{max-width:75%;padding:12px 16px;border-radius:18px;word-wrap:break-word}
.chat-msg.sent{align-self:flex-end;background:linear-gradient(135deg,var(--c),var(--cd));color:#fff;border-bottom-right-radius:4px}
.chat-msg.recv{align-self:flex-start;background:var(--h);color:var(--t);border-bottom-left-radius:4px}
.chat-msg .msg-text{font-size:15px;line-height:1.4}
.chat-msg .msg-time{display:block;font-size:11px;margin-top:4px;opacity:.7;text-align:right}
.chat-input-area{display:flex;gap:10px;padding:14px;border-top:1px solid var(--b);background:var(--card)}
.chat-input{flex:1;padding:12px 16px;border:1px solid var(--b);border-radius:24px;font-size:15px;outline:none;background:var(--bg);color:var(--t)}
.chat-input:focus{border-color:var(--c)}
.chat-send{width:44px;height:44px;border:none;background:linear-gradient(135deg,var(--c),var(--cd));border-radius:50%;color:#fff;font-size:16px;cursor:pointer}
.chat-send:hover{box-shadow:0 4px 12px rgba(248,109,49,.4)}

/* ============ ENHANCED REAL-TIME CHAT ============ */
.chat-overlay{position:fixed;inset:0;background:var(--bg);z-index:1000;display:none}
.chat-overlay.show{display:block}
.chat-container{display:flex;height:100%;max-width:1200px;margin:0 auto}
.chat-sidebar{width:320px;border-right:1px solid var(--b);display:flex;flex-direction:column;background:var(--card)}
.chat-main{flex:1;display:flex;flex-direction:column;background:var(--bg)}

/* Chat List */
.chat-empty-list{padding:60px 20px;text-align:center;color:var(--t3)}
.chat-empty-list i{font-size:48px;opacity:.3;margin-bottom:16px;display:block}
.chat-empty-list span{font-size:13px;display:block;margin-top:8px}

.chat-item{display:flex;align-items:center;gap:12px;padding:14px 16px;cursor:pointer;transition:.15s}
.chat-item:hover{background:var(--h)}
.chat-item.active{background:var(--cl)}
.chat-av{width:48px;height:48px;border-radius:50%;display:flex;align-items:center;justify-content:center;color:#fff;font-weight:600;font-size:18px;position:relative;flex-shrink:0}
.online-dot{position:absolute;bottom:2px;right:2px;width:12px;height:12px;border-radius:50%;background:#94a3b8;border:2px solid var(--card)}
.online-dot.on{background:#22c55e;animation:pulse-dot 2s infinite}
@keyframes pulse-dot{0%,100%{box-shadow:0 0 0 0 rgba(34,197,94,.4)}50%{box-shadow:0 0 0 6px rgba(34,197,94,0)}}
.chat-info{flex:1;min-width:0}
.chat-name{font-weight:600;font-size:15px;margin-bottom:2px}
.chat-preview{font-size:13px;color:var(--t3);white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
.chat-badge{min-width:20px;height:20px;background:var(--c);color:#fff;font-size:11px;font-weight:700;border-radius:10px;display:flex;align-items:center;justify-content:center;padding:0 6px}

/* Chat Header */
.chat-header{display:flex;align-items:center;gap:12px;padding:12px 16px;background:var(--card);border-bottom:1px solid var(--b)}
.chat-back{width:36px;height:36px;border:none;background:none;color:var(--t2);font-size:18px;cursor:pointer;display:none}
.chat-header-info{flex:1}
.chat-header-name{font-weight:600;font-size:16px}
.chat-header-status{font-size:12px;color:var(--t3)}
.chat-header-status.online{color:#22c55e}
.chat-more{width:36px;height:36px;border:none;background:none;color:var(--t2);font-size:16px;cursor:pointer;border-radius:50%}
.chat-more:hover{background:var(--h)}

/* Chat Body */
.chat-body{flex:1;overflow-y:auto;padding:16px;display:flex;flex-direction:column;gap:6px}
.chat-loading,.chat-empty-msg{display:flex;flex-direction:column;align-items:center;justify-content:center;height:100%;color:var(--t3)}
.chat-empty-msg i{font-size:48px;opacity:.3;margin-bottom:12px}

/* Messages */
.msg{display:flex;flex-direction:column;max-width:75%}
.msg.sent{align-self:flex-end;align-items:flex-end}
.msg.recv{align-self:flex-start;align-items:flex-start}
.msg-bubble{padding:10px 14px;border-radius:18px;font-size:15px;line-height:1.4;word-wrap:break-word}
.msg.sent .msg-bubble{background:linear-gradient(135deg,var(--c),var(--cd));color:#fff;border-bottom-right-radius:4px}
.msg.recv .msg-bubble{background:var(--card);border:1px solid var(--b);color:var(--t);border-bottom-left-radius:4px}
.msg-meta{font-size:11px;color:var(--t3);margin-top:4px;padding:0 4px}
.msg.sent .msg-meta{color:var(--t3)}

/* Chat Footer */
.chat-footer{display:flex;align-items:center;gap:8px;padding:12px 16px;background:var(--card);border-top:1px solid var(--b)}
.chat-attach{width:40px;height:40px;border:none;background:var(--h);border-radius:50%;color:var(--t2);font-size:16px;cursor:pointer}
.chat-attach:hover{background:var(--b);color:var(--c)}
.chat-input{flex:1;padding:10px 16px;border:1px solid var(--b);border-radius:24px;font-size:15px;outline:none;background:var(--bg);color:var(--t)}
.chat-input:focus{border-color:var(--c)}
.chat-send{width:40px;height:40px;border:none;background:linear-gradient(135deg,var(--c),var(--cd));border-radius:50%;color:#fff;font-size:16px;cursor:pointer}
.chat-send:hover{box-shadow:0 4px 12px rgba(248,109,49,.4);transform:scale(1.05)}

/* Mobile Chat */
@media(max-width:768px){
    .chat-container{flex-direction:column}
    .chat-sidebar{width:100%;border-right:none;height:100%}
    .chat-main{position:absolute;inset:0;transform:translateX(100%);transition:.25s;z-index:10}
    .chat-main.show{transform:translateX(0)}
    .chat-back{display:flex;align-items:center;justify-content:center}
}

/* Select Mode Bar */
.select-bar{position:fixed;top:0;left:0;right:0;height:56px;background:var(--c);display:flex;align-items:center;padding:0 16px;gap:16px;z-index:2000}
.select-bar button{width:40px;height:40px;border:none;background:rgba(255,255,255,.2);border-radius:50%;color:#fff;font-size:16px;cursor:pointer}
.select-bar span{flex:1;color:#fff;font-weight:600}

/* Chat Messages */
.chat-messages{flex:1;overflow-y:auto;padding:12px;display:flex;flex-direction:column;gap:8px;background:var(--bg)}
.chat-msg{display:flex;flex-direction:column;max-width:75%}
.chat-msg.sent{align-self:flex-end}
.chat-msg.recv{align-self:flex-start}
.chat-bubble{padding:10px 14px;border-radius:18px;font-size:15px;line-height:1.4;word-break:break-word}
.chat-msg.sent .chat-bubble{background:linear-gradient(135deg,var(--c),var(--cd));color:#fff;border-bottom-right-radius:4px}
.chat-msg.recv .chat-bubble{background:var(--card);color:var(--t);border:1px solid var(--b);border-bottom-left-radius:4px}
.chat-time{font-size:11px;color:var(--t3);margin-top:4px;padding:0 4px}
.chat-msg.sent .chat-time{text-align:right}
.chat-main-head{display:flex;align-items:center;gap:12px;padding:12px 16px;background:var(--card);border-bottom:1px solid var(--b)}
.chat-back-btn,.chat-close-btn{width:36px;height:36px;border:none;background:transparent;color:var(--t2);font-size:18px;cursor:pointer;border-radius:50%}
.chat-back-btn:hover,.chat-close-btn:hover{background:var(--h)}
.chat-back-btn{display:none}
.chat-main-info{flex:1}
.chat-main-name{font-weight:600;font-size:16px}
.chat-main-status .online{color:#22c55e}
.chat-main-status .offline{color:#94a3b8}
.chat-input-area{display:flex;gap:10px;padding:12px 16px;background:var(--card);border-top:1px solid var(--b)}
.chat-input{flex:1;padding:12px 16px;border:1px solid var(--b);border-radius:24px;font-size:15px;outline:none;background:var(--bg);color:var(--t)}
.chat-input:focus{border-color:var(--c)}
.chat-send{width:44px;height:44px;border:none;background:linear-gradient(135deg,var(--c),var(--cd));border-radius:50%;color:#fff;font-size:18px;cursor:pointer}
.chat-send:hover{transform:scale(1.05)}
.status-dot{position:absolute;bottom:0;right:0;width:12px;height:12px;border-radius:50%;background:#94a3b8;border:2px solid var(--card)}
.status-dot.online{background:#22c55e}
@media(max-width:768px){
    .chat-back-btn{display:flex;align-items:center;justify-content:center}
    .chat-close-btn{display:none}
    .chat-main{position:absolute;inset:0;transform:translateX(100%);transition:.2s;background:var(--bg)}
    .chat-main.show{transform:translateX(0)}
}

/* Voice Recording UI */
.voice-recording{display:flex;align-items:center;gap:12px;width:100%;padding:4px 0}
.voice-cancel{width:44px;height:44px;border:none;background:#ef4444;border-radius:50%;color:#fff;font-size:18px;cursor:pointer}
.voice-send{width:44px;height:44px;border:none;background:linear-gradient(135deg,var(--c),var(--cd));border-radius:50%;color:#fff;font-size:18px;cursor:pointer}
.voice-wave{display:flex;align-items:center;gap:3px;flex:1;justify-content:center}
.voice-wave span{width:4px;background:var(--c);border-radius:2px;animation:voiceWave 1s ease-in-out infinite}
.voice-wave span:nth-child(1){height:12px;animation-delay:0s}
.voice-wave span:nth-child(2){height:20px;animation-delay:.1s}
.voice-wave span:nth-child(3){height:16px;animation-delay:.2s}
.voice-wave span:nth-child(4){height:24px;animation-delay:.3s}
.voice-wave span:nth-child(5){height:14px;animation-delay:.4s}
@keyframes voiceWave{0%,100%{transform:scaleY(1)}50%{transform:scaleY(1.8)}}
.voice-time{font-size:14px;font-weight:600;color:var(--c);min-width:40px}

/* Voice Message Bubble */
.voice-msg{display:flex;align-items:center;gap:10px;padding:8px 12px;min-width:180px}
.voice-play-btn{width:40px;height:40px;border:none;background:rgba(255,255,255,.2);border-radius:50%;color:inherit;font-size:16px;cursor:pointer;display:flex;align-items:center;justify-content:center;flex-shrink:0}
.chat-msg.recv .voice-play-btn{background:var(--c);color:#fff}
.chat-msg.sent .voice-play-btn{background:rgba(255,255,255,.25)}
.voice-wave-static{display:flex;align-items:center;gap:2px;flex:1}
.voice-wave-static span{width:3px;background:currentColor;border-radius:2px;opacity:.6}
.voice-wave-static span:nth-child(1){height:8px}
.voice-wave-static span:nth-child(2){height:14px}
.voice-wave-static span:nth-child(3){height:10px}
.voice-wave-static span:nth-child(4){height:18px}
.voice-wave-static span:nth-child(5){height:12px}
.voice-wave-static span:nth-child(6){height:16px}
.voice-wave-static span:nth-child(7){height:10px}
.voice-wave-static span:nth-child(8){height:6px}
.voice-duration{font-size:12px;opacity:.8;min-width:32px}

/* Mic button in chat */
.chat-voice{width:44px;height:44px;border:none;background:var(--h);border-radius:50%;color:var(--t2);font-size:18px;cursor:pointer;flex-shrink:0}
.chat-voice:hover{background:var(--c);color:#fff}
.chat-voice:active{transform:scale(.95)}

/* Adjust chat input area */
.chat-input-area{display:flex;align-items:center;gap:8px;padding:12px 16px;background:var(--card);border-top:1px solid var(--b)}

/* WhatsApp-style Chat Background */
.chat-messages{
    background-color:#0b141a;
    background-image:url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23ffffff' fill-opacity='0.03'%3E%3Cpath d='M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E");
}
body.dark .chat-messages{
    background-color:#0b141a;
    background-image:url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23ffffff' fill-opacity='0.03'%3E%3Cpath d='M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E");
}
body:not(.dark) .chat-messages{
    background-color:#e5ddd5;
    background-image:url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23000000' fill-opacity='0.04'%3E%3Cpath d='M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E");
}

/* Better message bubbles for WhatsApp look */
.chat-msg.sent .chat-bubble{
    background:#005c4b;
    color:#fff;
    border-radius:8px 8px 0 8px;
    box-shadow:0 1px 1px rgba(0,0,0,.1);
}
.chat-msg.recv .chat-bubble{
    background:#1f2c34;
    color:#e9edef;
    border:none;
    border-radius:8px 8px 8px 0;
    box-shadow:0 1px 1px rgba(0,0,0,.1);
}
body:not(.dark) .chat-msg.sent .chat-bubble{
    background:#d9fdd3;
    color:#111b21;
}
body:not(.dark) .chat-msg.recv .chat-bubble{
    background:#fff;
    color:#111b21;
}

/* Voice message styling */
.voice-msg{
    background:transparent !important;
    padding:4px 8px;
}
.chat-msg.sent .voice-play-btn{
    background:rgba(255,255,255,.2);
    color:#fff;
}
.chat-msg.recv .voice-play-btn{
    background:#00a884;
    color:#fff;
}
.chat-time{
    font-size:11px;
    color:rgba(255,255,255,.6);
    margin-top:2px;
    padding:0 4px;
}
body:not(.dark) .chat-time{
    color:rgba(0,0,0,.45);
}
body:not(.dark) .chat-msg.sent .chat-time{
    color:rgba(0,0,0,.45);
}

/* Chat header WhatsApp style */
.chat-main-head{
    background:#1f2c34;
    border-bottom:none;
}
body:not(.dark) .chat-main-head{
    background:#008069;
}
body:not(.dark) .chat-main-head .chat-main-name,
body:not(.dark) .chat-main-head .chat-back-btn,
body:not(.dark) .chat-main-head .chat-close-btn{
    color:#fff;
}
body:not(.dark) .chat-main-status .online{color:#d1f4cc}
body:not(.dark) .chat-main-status .offline{color:rgba(255,255,255,.7)}

/* Chat input area WhatsApp style */
.chat-input-area{
    background:#1f2c34;
    border-top:none;
    padding:8px 12px;
}
body:not(.dark) .chat-input-area{
    background:#f0f2f5;
}
.chat-input{
    background:#2a3942;
    border:none;
    color:#e9edef;
}
body:not(.dark) .chat-input{
    background:#fff;
    color:#111b21;
}
.chat-send{
    background:#00a884;
}
.chat-voice{
    background:#2a3942;
    color:#8696a0;
}
body:not(.dark) .chat-voice{
    background:#fff;
    color:#54656f;
}
.chat-voice:hover{
    background:#00a884;
    color:#fff;
}

/* Chat sidebar WhatsApp style */
.chat-sidebar{
    background:#111b21;
    border-right:1px solid #2a3942;
}
body:not(.dark) .chat-sidebar{
    background:#fff;
    border-right:1px solid #e9edef;
}
.chat-sidebar-head{
    background:#1f2c34;
}
body:not(.dark) .chat-sidebar-head{
    background:#008069;
}
body:not(.dark) .chat-sidebar-head h3{
    color:#fff;
}
.chat-tabs{
    background:#1f2c34;
    border-bottom:1px solid #2a3942;
}
body:not(.dark) .chat-tabs{
    background:#f0f2f5;
    border-bottom:1px solid #e9edef;
}
.chat-tab{
    color:#8696a0;
}
.chat-tab.on{
    color:#00a884;
    border-bottom-color:#00a884;
}
.chat-item{
    border-bottom:1px solid #2a3942;
}
body:not(.dark) .chat-item{
    border-bottom:1px solid #e9edef;
}
.chat-item:hover,.chat-item.on{
    background:#2a3942;
}
body:not(.dark) .chat-item:hover,body:not(.dark) .chat-item.on{
    background:#f0f2f5;
}
.chat-item-name{
    color:#e9edef;
}
body:not(.dark) .chat-item-name{
    color:#111b21;
}
.chat-item-last{
    color:#8696a0;
}
.chat-new-input input{
    background:#2a3942;
    border:none;
    color:#e9edef;
}
body:not(.dark) .chat-new-input input{
    background:#f0f2f5;
    color:#111b21;
}

/* ============ VOICE MESSAGE COMPLETE STYLES ============ */

/* Recording UI */
.voice-record-ui{display:flex;align-items:center;gap:12px;width:100%;padding:8px 0}
.voice-cancel-btn{width:44px;height:44px;border:none;background:#dc2626;border-radius:50%;color:#fff;font-size:18px;cursor:pointer;flex-shrink:0;transition:.2s}
.voice-cancel-btn:hover{background:#b91c1c;transform:scale(1.05)}
.voice-send-btn{width:44px;height:44px;border:none;background:#00a884;border-radius:50%;color:#fff;font-size:18px;cursor:pointer;flex-shrink:0;transition:.2s}
.voice-send-btn:hover{background:#008f72;transform:scale(1.05)}
.voice-record-indicator{display:flex;align-items:center;gap:8px}
.voice-record-dot{width:12px;height:12px;background:#dc2626;border-radius:50%;animation:recordPulse 1s ease-in-out infinite}
@keyframes recordPulse{0%,100%{opacity:1;transform:scale(1)}50%{opacity:.5;transform:scale(1.2)}}
.voice-record-time{font-size:16px;font-weight:600;color:#dc2626;min-width:45px}
.voice-waveform{display:flex;align-items:center;gap:3px;flex:1;justify-content:center;padding:0 16px}
.voice-waveform span{width:4px;background:#00a884;border-radius:2px;animation:waveAnim 1s ease-in-out infinite}
.voice-waveform span:nth-child(1){height:8px;animation-delay:0s}
.voice-waveform span:nth-child(2){height:16px;animation-delay:.1s}
.voice-waveform span:nth-child(3){height:12px;animation-delay:.2s}
.voice-waveform span:nth-child(4){height:20px;animation-delay:.3s}
.voice-waveform span:nth-child(5){height:14px;animation-delay:.4s}
.voice-waveform span:nth-child(6){height:18px;animation-delay:.5s}
.voice-waveform span:nth-child(7){height:10px;animation-delay:.6s}
.voice-waveform span:nth-child(8){height:22px;animation-delay:.7s}
.voice-waveform span:nth-child(9){height:16px;animation-delay:.8s}
.voice-waveform span:nth-child(10){height:12px;animation-delay:.9s}
@keyframes waveAnim{0%,100%{transform:scaleY(1)}50%{transform:scaleY(2)}}

/* Voice Bubble in Messages */
.voice-bubble{display:flex;align-items:center;gap:10px;padding:8px 12px;min-width:200px;max-width:280px}
.voice-play-btn{width:42px;height:42px;border:none;border-radius:50%;font-size:16px;cursor:pointer;display:flex;align-items:center;justify-content:center;flex-shrink:0;transition:.2s}
.chat-msg.sent .voice-play-btn{background:rgba(255,255,255,.2);color:#fff}
.chat-msg.recv .voice-play-btn{background:#00a884;color:#fff}
.voice-play-btn:hover{transform:scale(1.1)}
.voice-wave-display{flex:1;display:flex;flex-direction:column;gap:4px}
.voice-progress-bar{height:4px;background:rgba(255,255,255,.2);border-radius:2px;overflow:hidden}
.chat-msg.recv .voice-progress-bar{background:rgba(0,0,0,.1)}
.voice-progress{height:100%;width:0;background:#00a884;border-radius:2px;transition:width .1s linear}
.chat-msg.sent .voice-progress{background:#fff}
.voice-meta{display:flex;justify-content:space-between;font-size:11px;opacity:.8}
.voice-fwd-btn{width:32px;height:32px;border:none;background:transparent;color:inherit;opacity:.6;font-size:14px;cursor:pointer;border-radius:50%;flex-shrink:0}
.voice-fwd-btn:hover{opacity:1;background:rgba(255,255,255,.1)}

/* Mic button */
.chat-mic-btn{width:44px;height:44px;border:none;background:#2a3942;border-radius:50%;color:#8696a0;font-size:20px;cursor:pointer;flex-shrink:0;transition:.2s}
.chat-mic-btn:hover{background:#00a884;color:#fff}
body:not(.dark) .chat-mic-btn{background:#f0f2f5;color:#54656f}
body:not(.dark) .chat-mic-btn:hover{background:#00a884;color:#fff}

/* Send button */
.chat-send-btn{width:44px;height:44px;border:none;background:#00a884;border-radius:50%;color:#fff;font-size:18px;cursor:pointer;flex-shrink:0;transition:.2s}
.chat-send-btn:hover{background:#008f72;transform:scale(1.05)}

/* Forward Modal */
.forward-modal{position:fixed;inset:0;background:rgba(0,0,0,.6);z-index:2000;display:flex;align-items:center;justify-content:center;opacity:0;transition:.2s}
.forward-modal.show{opacity:1}
.forward-box{background:#1f2c34;border-radius:12px;width:90%;max-width:360px;max-height:70vh;overflow:hidden}
body:not(.dark) .forward-box{background:#fff}
.forward-head{display:flex;align-items:center;justify-content:space-between;padding:16px;border-bottom:1px solid #2a3942}
body:not(.dark) .forward-head{border-bottom-color:#e9edef}
.forward-head h3{margin:0;font-size:18px;color:#e9edef}
body:not(.dark) .forward-head h3{color:#111b21}
.forward-head button{width:32px;height:32px;border:none;background:transparent;color:#8696a0;font-size:18px;cursor:pointer;border-radius:50%}
.forward-head button:hover{background:#2a3942}
.forward-list{max-height:50vh;overflow-y:auto}
.forward-item{display:flex;align-items:center;gap:12px;padding:12px 16px;cursor:pointer;transition:.15s}
.forward-item:hover{background:#2a3942}
body:not(.dark) .forward-item:hover{background:#f0f2f5}
.forward-av{width:40px;height:40px;border-radius:50%;display:flex;align-items:center;justify-content:center;color:#fff;font-weight:600}
.forward-item span{color:#e9edef;font-size:15px}
body:not(.dark) .forward-item span{color:#111b21}

/* Chat Empty State */
.chat-empty{display:flex;flex-direction:column;align-items:center;justify-content:center;height:100%;padding:40px;text-align:center}
.chat-empty i{font-size:60px;color:#8696a0;opacity:.3;margin-bottom:16px}
.chat-empty p{font-size:16px;color:#8696a0;margin:0}
.chat-empty span{font-size:13px;color:#8696a0;opacity:.7;margin-top:8px}
.chat-loading{display:flex;align-items:center;justify-content:center;height:100%;color:#8696a0}
.chat-loading i{font-size:24px}

/* Chat Meta */
.chat-meta{font-size:11px;margin-top:4px;padding:0 4px}
.chat-msg.sent .chat-meta{text-align:right;color:rgba(255,255,255,.6)}
.chat-msg.recv .chat-meta{color:rgba(255,255,255,.5)}
body:not(.dark) .chat-msg.sent .chat-meta{color:rgba(0,0,0,.45)}
body:not(.dark) .chat-msg.recv .chat-meta{color:rgba(0,0,0,.45)}

/* Mobile Responsive */
@media(max-width:768px){
    .voice-bubble{min-width:180px;max-width:240px}
    .voice-record-ui{gap:8px}
    .voice-waveform{padding:0 8px}
    .forward-box{width:95%;max-width:none;margin:0 10px}
}
