<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no,viewport-fit=cover"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"><meta name="apple-mobile-web-app-title" content="SendBaba"><meta name="mobile-web-app-capable" content="yes"><meta name="theme-color" content="#f86d31"><link rel="manifest" href="/static/manifest.json"><link rel="apple-touch-icon" href="/static/icons/icon-192.png"><title>SendBaba Mail</title><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"><link rel="stylesheet" href="/static/css/webmail.css"></head><body><div class="toast-box" id="toast-box"></div><div class="app" id="app"><nav class="nav desktop-only"><button class="nav-toggle" id="nav-toggle" onclick="toggleSidebar()"><i class="fas fa-chevron-left"></i></button><button class="nav-btn on" onclick="loadFolder('inbox')"><i class="fas fa-inbox"></i><span class="tip">Inbox</span></button><button class="nav-btn" onclick="openChat()"><i class="fas fa-comments"></i><span class="tip">Chat</span></button><button class="nav-btn" onclick="showNotifications()"><i class="fas fa-bell"></i><span class="badge" id="notif-badge" style="display:none">0</span><span class="tip">Notifications</span></button><div class="nav-space"></div><div class="dark-toggle" id="darkToggle" onclick="toggleDark()"></div><button class="nav-btn" onclick="location.href='/settings'"><i class="fas fa-cog"></i><span class="tip">Settings</span></button><button class="nav-btn" onclick="location.href='/logout'"><i class="fas fa-sign-out-alt"></i><span class="tip">Logout</span></button></nav><aside class="side desktop-only" id="sidebar"><div class="side-head"><h2>Mailbox</h2></div><div class="side-body"><div class="folder on" data-folder="inbox" onclick="loadFolder('inbox',this)"><i class="fas fa-inbox"></i> Inbox <span class="cnt" id="inbox-cnt"></span></div><div class="folder" data-folder="sent" onclick="loadFolder('sent',this)"><i class="fas fa-paper-plane"></i> Sent</div><div class="folder" data-folder="starred" onclick="loadFolder('starred',this)"><i class="fas fa-star"></i> Starred</div><div class="folder" data-folder="drafts" onclick="loadFolder('drafts',this)"><i class="fas fa-file-alt"></i> Drafts</div><div class="folder" data-folder="spam" onclick="loadFolder('spam',this)"><i class="fas fa-exclamation-triangle"></i> Spam</div><div class="folder" data-folder="trash" onclick="loadFolder('trash',this)"><i class="fas fa-trash"></i> Trash</div><div class="ad-banner" onclick="window.open('/ads','_blank')"><i class="fas fa-bullhorn"></i><h4>Advertise Here!</h4><p>Get thousands of views daily</p></div></div></aside><section class="list"><div class="list-head"><div class="list-title"><span id="list-title">Inbox</span><button class="empty-trash-btn" id="empty-trash-btn" onclick="emptyTrash()"><i class="fas fa-trash"></i> Empty Trash</button></div><div class="search"><i class="fas fa-search"></i><input type="text" placeholder="Search emails..." oninput="searchEmails(this.value)"></div></div><div class="emails" id="email-list"><div class="loading"><i class="fas fa-spinner"></i><p>Loading...</p></div></div></section><section class="view desktop-only" id="email-view"><div class="view-empty"><i class="far fa-envelope-open"></i><p>Select an email to read</p></div></section></div><button class="fab" id="fab" onclick="openCompose()"><i class="fas fa-pen"></i></button><nav class="mob-nav mobile-only"><button class="on" onclick="mobileNav('inbox',this)"><i class="fas fa-inbox"></i><span>Inbox</span></button><button onclick="mobileNav('sent',this)"><i class="fas fa-paper-plane"></i><span>Sent</span></button><button onclick="openChat()"><i class="fas fa-comments"></i><span>Chat</span></button><button onclick="openTools()"><i class="fas fa-th-large"></i><span>More</span></button></nav><div class="email-view-panel mobile-only" id="ev-panel"><div class="ev-head"><button class="ev-back" onclick="closeEV()"><i class="fas fa-arrow-left"></i></button><div class="ev-title" id="ev-title">Email</div><div class="ev-actions"><button id="ev-restore" class="restore" onclick="restoreCurrent()" style="display:none"><i class="fas fa-undo"></i></button><button onclick="starCurrent()"><i id="ev-star" class="far fa-star"></i></button><button onclick="deleteCurrent()"><i class="fas fa-trash"></i></button></div></div><div class="ev-body" id="ev-body"></div><div class="ev-footer" id="ev-footer"><button onclick="replyEmail()"><i class="fas fa-reply"></i> Reply</button><button class="primary" onclick="fwdEmail()"><i class="fas fa-share"></i> Forward</button></div></div><div class="compose-overlay" id="compose-overlay" onclick="if(event.target===this)closeCompose()"><div class="compose-box"><div class="compose-head"><h3 id="compose-title">New Message</h3><button onclick="closeCompose()"><i class="fas fa-times"></i></button></div><div class="compose-body"><div class="compose-field"><label>To</label><input type="email" id="compose-to" placeholder="recipient@example.com" oninput="searchContacts(this.value)" autocomplete="off"><div class="contact-suggestions" id="contact-suggestions"></div></div><div class="compose-field"><label>Subject</label><input type="text" id="compose-subj" placeholder="Email subject"></div><div class="compose-toolbar"><button onclick="execCmd('bold')"><i class="fas fa-bold"></i></button><button onclick="execCmd('italic')"><i class="fas fa-italic"></i></button><button onclick="execCmd('underline')"><i class="fas fa-underline"></i></button><div class="sep"></div><button onclick="execCmd('insertUnorderedList')"><i class="fas fa-list-ul"></i></button><button onclick="execCmd('insertOrderedList')"><i class="fas fa-list-ol"></i></button><div class="sep"></div><button onclick="insertLink()"><i class="fas fa-link"></i></button><button onclick="insertImage()"><i class="fas fa-image"></i></button></div><div class="compose-editor" id="compose-editor" contenteditable="true" data-placeholder="Write your message..."></div><div class="audio-recorder" id="audio-recorder"><div class="audio-wave"><span></span><span></span><span></span><span></span><span></span></div><div class="audio-time" id="audio-time">0:00</div><div class="audio-controls"><button class="pause" onclick="pauseRecording()"><i class="fas fa-pause"></i></button><button class="done" onclick="doneRecording()"><i class="fas fa-check"></i></button><button class="cancel" onclick="cancelRecording()"><i class="fas fa-times"></i></button></div></div></div><div class="compose-foot"><div class="compose-attach"><button onclick="attachFile()"><i class="fas fa-paperclip"></i></button><button onclick="attachImage()"><i class="fas fa-image"></i></button><button onclick="attachVideo()"><i class="fas fa-video"></i></button><button onclick="startRecording()"><i class="fas fa-microphone"></i></button></div><div class="send-wrap"><button class="send-btn" onclick="sendEmail()"><i class="fas fa-arrow-right"></i></button><div class="send-options"><div class="send-opt primary" onclick="sendEmail()"><i class="fas fa-paper-plane"></i> Send Now</div><div class="send-opt" onclick="saveDraft()"><i class="fas fa-save"></i> Save Draft</div><div class="send-opt danger" onclick="closeCompose()"><i class="fas fa-times"></i> Cancel</div></div></div></div></div></div><div class="chat-overlay" id="chat-overlay"><div class="chat-container"><div class="chat-sidebar"><div class="chat-sidebar-head"><div class="chat-sidebar-head-top"><h3>Chats</h3><div class="chat-head-actions"><button onclick="openInvite()"><i class="fas fa-user-plus"></i></button><button onclick="closeChat()"><i class="fas fa-times"></i></button></div></div><div class="chat-new-input"><input type="email" id="chat-new-email" placeholder="Start new chat..."><button onclick="startNewChat()"><i class="fas fa-plus"></i></button></div></div><div class="chat-tabs"><div class="chat-tab on" onclick="switchTab('all',this)">All</div><div class="chat-tab" onclick="switchTab('unread',this)">Unread</div><div class="chat-tab" onclick="switchTab('groups',this)">Groups</div></div><div class="chat-list" id="chat-list"></div></div><div class="chat-main" id="chat-main"><div class="chat-empty"><i class="fas fa-comments"></i><p>Select a conversation</p></div></div></div></div><div class="invite-modal" id="invite-modal"><div class="invite-box"><h3>Invite to Chat</h3><input type="email" id="invite-email" placeholder="Enter email address"><div class="invite-btns"><button class="cancel" onclick="closeInvite()">Cancel</button><button class="send" onclick="sendInvite()">Send Invite</button></div></div></div><div class="tools-overlay" id="tools-overlay"><div class="tools-backdrop" onclick="closeTools()"></div><div class="tools-sheet"><div class="tools-head"><h3>More</h3><button onclick="closeTools()"><i class="fas fa-times"></i></button></div><div class="tools-body"><div class="tools-grid"><div class="tools-item" onclick="closeTools();loadFolder('drafts')"><div class="tools-icon" style="background:#e0f2fe;color:#0ea5e9"><i class="fas fa-file-alt"></i></div><span>Drafts</span></div><div class="tools-item" onclick="closeTools();loadFolder('starred')"><div class="tools-icon" style="background:#fef3c7;color:#f59e0b"><i class="fas fa-star"></i></div><span>Starred</span></div><div class="tools-item" onclick="closeTools();loadFolder('spam')"><div class="tools-icon" style="background:#fef2f2;color:#ef4444"><i class="fas fa-exclamation-triangle"></i></div><span>Spam</span></div><div class="tools-item" onclick="closeTools();loadFolder('trash')"><div class="tools-icon" style="background:#f3f4f6;color:#6b7280"><i class="fas fa-trash"></i></div><span>Trash</span></div><div class="tools-item" onclick="closeTools();toggleDark()"><div class="tools-icon" style="background:#f5f3ff;color:#8b5cf6"><i class="fas fa-moon"></i></div><span>Dark</span></div><div class="tools-item" onclick="location.href='/settings'"><div class="tools-icon" style="background:#eff6ff;color:#3b82f6"><i class="fas fa-cog"></i></div><span>Settings</span></div><div class="tools-item" onclick="location.href='/logout'"><div class="tools-icon" style="background:#fef2f2;color:#ef4444"><i class="fas fa-sign-out-alt"></i></div><span>Logout</span></div></div></div></div></div><div class="lightbox" id="lightbox" onclick="if(event.target===this)closeLightbox()"><button class="lightbox-close" onclick="closeLightbox()"><i class="fas fa-times"></i></button><div class="lightbox-content" id="lightbox-content"></div><div class="lightbox-nav"><button onclick="prevAttachment()"><i class="fas fa-chevron-left"></i> Prev</button><button onclick="downloadAttachment()"><i class="fas fa-download"></i> Download</button><button onclick="nextAttachment()">Next <i class="fas fa-chevron-right"></i></button></div></div><div class="confirm-modal" id="confirm-modal"><div class="confirm-box"><h3 id="confirm-title"><i class="fas fa-exclamation-triangle"></i> Confirm</h3><p id="confirm-msg">Are you sure?</p><div class="confirm-btns"><button class="cancel" onclick="closeConfirm()">Cancel</button><button class="danger" id="confirm-yes">Delete</button></div></div></div><script>
// Preloaded data from server - no initial API call needed
window.PRELOADED_EMAILS = {{ preloaded_emails|safe if preloaded_emails else '[]' }};
window.PRELOADED_UNREAD = {{ unread_count|default(0) }};
</script>
<script src="/static/js/webmail.js"></script></body></html>
